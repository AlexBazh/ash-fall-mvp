import{_ as S,u as R,a as I,b as q,c as p,d as r,o,e as n,f as i,t as a,g as d,n as x,F as b,r as M,h as D}from"./index-BvU2tgO6.js";const T="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1.47738%201.47733C1.89581%201.05901%202.55756%201.03312%203.00641%201.3992L3.09346%201.47733L7.99975%206.38362L12.906%201.47733L12.9931%201.3992C13.442%201.03322%2014.1037%201.05896%2014.5221%201.47733C14.9401%201.89576%2014.9662%202.55763%2014.6002%203.00636L14.5221%203.09342L9.61583%207.99971L14.5221%2012.906L14.6002%2012.9931C14.9659%2013.4419%2014.9403%2014.1038%2014.5221%2014.5221C14.1038%2014.9404%2013.442%2014.9659%2012.9931%2014.6002L12.906%2014.5221L7.99975%209.61579L3.09346%2014.5221L3.00641%2014.6002C2.55768%2014.9662%201.89582%2014.9401%201.47738%2014.5221C1.05896%2014.1037%201.03314%2013.4419%201.39925%2012.9931L1.47738%2012.906L6.38367%207.99971L1.47738%203.09342L1.39925%203.00636C1.03314%202.55747%201.05896%201.89575%201.47738%201.47733Z'%20fill='%232A2A2A'/%3e%3c/svg%3e",U={key:0,class:"building-tooltip"},z={class:"header"},N={class:"icon-name"},X=["src"],Y={class:"name"},j={key:0,class:"stata"},G={key:0},J={key:1},K={key:1,class:"stata"},O={key:2,class:"stata"},Q=["src"],W={key:3,class:"stata"},$={key:4,class:"stata"},e0=["src"],s0={key:0},t0={key:5,class:"stata"},r0=["src"],o0={key:0},l0={key:6,class:"stata"},a0={key:7,class:"stata"},n0={key:8,class:"stata"},u0={class:"id"},i0={key:1,style:{padding:"12px","font-size":"12px"}},d0={__name:"BuildingTooltip",props:{moduleId:String},setup(B){const h=B,w=R(),m=I(),L=q(),e=p(()=>h.moduleId&&L.placedBuildings.find(t=>t.id===h.moduleId)||null),A=p(()=>!e.value||!e.value.workers?"#bdbdbd":e.value.workersAssigned===0?"#ff6b6b":e.value.workersAssigned<e.value.workers?"#ecc827":"#38d39f"),F=p(()=>{var u,c,C;const t=e.value;if(!t||!t.requiresResourceCell)return null;let s=0;for(let l=0;l<t.height;l++)for(let f=0;f<t.width;f++){const V=t.originX+f,P=t.originY+l,v=(c=(u=m.mapData)==null?void 0:u[P])==null?void 0:c[V];((C=v==null?void 0:v.resource)==null?void 0:C.type)===t.requiresResourceCell&&(s+=v.resource.amount||0)}return s});function g(t){switch(t){case"nutria":return new URL("data:image/svg+xml,%3csvg%20width='24'%20height='25'%20viewBox='0%200%2024%2025'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13.9555%207.28524L16.5146%206.0144C16.8267%205.85686%2016.9099%205.44725%2016.6707%205.19518C15.7448%204.16591%2014.8086%203.30468%2014.0596%202.6535C13.7163%202.35942%2013.2065%202.60099%2013.2065%203.05261V6.81262C13.2065%207.20122%2013.6123%207.45329%2013.9555%207.28524Z'%20fill='%23FCCE05'/%3e%3cpath%20d='M13.2065%2020.2351V21.968C13.2065%2022.2831%2013.4874%2022.5457%2013.7995%2022.4932C16.6394%2022.0205%2019.0113%2020.0985%2020.1348%2017.5148C20.3324%2017.0737%2019.8539%2016.6326%2019.417%2016.8426L13.4978%2019.7729C13.321%2019.857%2013.2065%2020.0355%2013.2065%2020.2351Z'%20fill='%23FCCE05'/%3e%3cpath%20d='M11.6461%203.03156C11.6461%202.57994%2011.1364%202.33838%2010.7931%202.62195C8.33802%204.70151%203.97927%209.08118%204.00007%2014.1015C4.00007%2018.3237%207.05848%2021.8211%2011.0531%2022.4933C11.3652%2022.5458%2011.6461%2022.2832%2011.6461%2021.9681V3.03156Z'%20fill='%23FCCE05'/%3e%3cpath%20d='M13.9242%2012.5997L19.4273%2010.2681C19.7082%2010.1421%2019.8434%209.81647%2019.7082%209.5434C19.3233%208.7767%2018.8759%208.031%2018.387%207.33781C18.2414%207.12775%2017.9709%207.06474%2017.742%207.16977L13.4873%209.25982C13.3105%209.34385%2013.196%209.5329%2013.196%209.73245V12.1166C13.2064%2012.4842%2013.5809%2012.7468%2013.9242%2012.5997Z'%20fill='%23FCCE05'/%3e%3cpath%20d='M20.5717%2014.5321C20.7381%2014.4481%2020.8422%2014.2905%2020.8422%2014.112C20.8422%2013.4398%2020.7589%2012.7781%2020.6133%2012.127C20.5405%2011.8119%2020.1972%2011.6438%2019.9059%2011.7699L13.5186%2014.5216C13.3314%2014.6056%2013.2065%2014.7947%2013.2065%2015.0047V17.3154C13.2065%2017.704%2013.6123%2017.956%2013.9555%2017.788L20.0932%2014.7737L20.5717%2014.5321Z'%20fill='%23FCCE05'/%3e%3c/svg%3e",import.meta.url).href;case"ferrolite":return new URL("data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M16.51%205.01L14.55%203.05C13.15%201.65%2010.85%201.65%209.45001%203.05L7.49001%205.01C7.10001%205.4%207.10001%206.04%207.49001%206.43L11.3%2010.24C11.69%2010.63%2012.32%2010.63%2012.71%2010.24L16.52%206.43C16.9%206.04%2016.9%205.4%2016.51%205.01Z'%20fill='%23FCCE05'/%3e%3cpath%20d='M5.01%207.49001L3.05%209.45001C1.65%2010.85%201.65%2013.15%203.05%2014.55L5.01%2016.51C5.4%2016.9%206.03%2016.9%206.42%2016.51L10.23%2012.7C10.62%2012.31%2010.62%2011.68%2010.23%2011.29L6.43%207.49001C6.04%207.10001%205.4%207.10001%205.01%207.49001Z'%20fill='%23FCCE05'/%3e%3cpath%20d='M20.9498%209.45001L18.9898%207.49001C18.5998%207.10001%2017.9698%207.10001%2017.5798%207.49001L13.7698%2011.3C13.3798%2011.69%2013.3798%2012.32%2013.7698%2012.71L17.5798%2016.52C17.9698%2016.91%2018.5998%2016.91%2018.9898%2016.52L20.9498%2014.56C22.3498%2013.15%2022.3498%2010.85%2020.9498%209.45001Z'%20fill='%23FCCE05'/%3e%3cpath%20d='M7.49005%2018.99L9.45005%2020.95C10.8501%2022.35%2013.1501%2022.35%2014.5501%2020.95L16.5101%2018.99C16.9001%2018.6%2016.9001%2017.97%2016.5101%2017.58L12.7001%2013.77C12.3101%2013.38%2011.6801%2013.38%2011.2901%2013.77L7.48005%2017.58C7.10005%2017.96%207.10005%2018.6%207.49005%2018.99Z'%20fill='%23FCCE05'/%3e%3c/svg%3e",import.meta.url).href;case"morale":return new URL("data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M18.8008%209.80859C17.6708%209.80859%2016.6608%2010.3586%2016.0308%2011.1986C15.4008%2010.3586%2014.3908%209.80859%2013.2608%209.80859C11.3508%209.80859%209.80078%2011.3686%209.80078%2013.2886C9.80078%2014.0286%209.92078%2014.7186%2010.1208%2015.3486C11.1008%2018.4586%2014.1408%2020.3286%2015.6408%2020.8386C15.8508%2020.9086%2016.2008%2020.9086%2016.4108%2020.8386C17.9108%2020.3286%2020.9508%2018.4686%2021.9308%2015.3486C22.1408%2014.7086%2022.2508%2014.0286%2022.2508%2013.2886C22.2608%2011.3686%2020.7108%209.80859%2018.8008%209.80859Z'%20fill='%233BC387'/%3e%3cpath%20d='M20.75%208.24C20.75%208.47%2020.52%208.62%2020.3%208.56C18.95%208.21%2017.47%208.5%2016.35%209.3C16.13%209.46%2015.83%209.46%2015.62%209.3C14.83%208.72%2013.87%208.4%2012.86%208.4C10.28%208.4%208.18%2010.51%208.18%2013.11C8.18%2015.93%209.53%2018.04%2010.89%2019.45C10.96%2019.52%2010.9%2019.64%2010.81%2019.6C8.08%2018.67%202%2014.81%202%208.24C2%205.34%204.33%203%207.21%203C8.92%203%2010.43%203.82%2011.38%205.09C12.34%203.82%2013.85%203%2015.55%203C18.42%203%2020.75%205.34%2020.75%208.24Z'%20fill='%233BC387'/%3e%3c/svg%3e",import.meta.url).href;case"energy":return new URL("data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M17.91%2010.72H14.82V3.52002C14.82%201.84002%2013.91%201.50002%2012.8%202.76002L12%203.67002L5.23001%2011.37C4.30001%2012.42%204.69001%2013.28%206.09001%2013.28H9.18001V20.48C9.18001%2022.16%2010.09%2022.5%2011.2%2021.24L12%2020.33L18.77%2012.63C19.7%2011.58%2019.31%2010.72%2017.91%2010.72Z'%20fill='%23FCCE05'/%3e%3c/svg%3e",import.meta.url).href;default:return""}}function E(){w.forceHide()}function Z(){e.value&&L.toggleBuildingEnabled(e.value.id)}function _(t){const s=e.value;if(!s)return 0;if(!s.workers)return t.amountPerHour;if(s.enabled===!1||s.status==="На паузе"||!s.workersAssigned)return 0;const u=s.workersAssigned/s.workers;return+(t.amountPerHour*u).toFixed(1)}function k(t){const s=e.value;if(!s)return 0;if(!s.workers)return t.amountPerHour;if(s.enabled===!1||s.status==="На паузе"||!s.workersAssigned)return 0;const u=s.workersAssigned/s.workers;return+(t.amountPerHour*u).toFixed(1)}function y(t,s=!1){const u=e.value;return u!=null&&u.workers?s?k(t)!==t.amountPerHour:_(t)!==t.amountPerHour:!1}function H(){e.value&&(m.removeBuilding(e.value.id),w.forceHide())}return(t,s)=>{var u,c,C;return e.value?(o(),r("div",U,[n("div",z,[n("div",N,[n("img",{src:e.value.icon,class:"icon"},null,8,X),n("span",Y,a(e.value.name),1)]),n("div",{onClick:E,class:"close-btn"},s[0]||(s[0]=[n("img",{src:T,alt:""},null,-1)]))]),e.value.workers?(o(),r("div",j,[s[1]||(s[1]=d(" Работники: ")),n("span",{style:x({color:A.value})},[d(a(e.value.workersAssigned||0)+" / "+a(e.value.workers)+" ",1),e.value.workersAssigned===0?(o(),r("span",G,"(не работает)")):e.value.workersAssigned<e.value.workers?(o(),r("span",J,"(снижено)")):i("",!0)],4)])):i("",!0),e.value.storage?(o(),r("div",K,"Склад: "+a(e.value.storage),1)):i("",!0),e.value.storage!=null&&e.value.storageCurrent!=null&&((u=e.value.produces)!=null&&u.length)?(o(),r("div",O,[s[2]||(s[2]=d(" В хранилище: ")),n("img",{src:g(e.value.produces[0].resource),class:"res-icon"},null,8,Q),n("span",null,a(Math.floor(e.value.storageCurrent))+" / "+a(e.value.storage),1)])):i("",!0),e.value.housing?(o(),r("div",W,"Жильё: "+a(e.value.housing),1)):i("",!0),(c=e.value.produces)!=null&&c.length?(o(),r("div",$,[(o(!0),r(b,null,M(e.value.produces,l=>(o(),r("div",{key:l.resource,class:"stat green"},[s[3]||(s[3]=d(" Производит: ")),n("img",{src:g(l.resource),class:"res-icon"},null,8,e0),d(" +"+a(_(l))+"/ч ",1),y(l)?(o(),r("span",s0,"(макс: "+a(l.amountPerHour)+")",1)):i("",!0)]))),128))])):i("",!0),(C=e.value.consumes)!=null&&C.length?(o(),r("div",t0,[(o(!0),r(b,null,M(e.value.consumes,l=>(o(),r("div",{key:l.resource,class:"stat red"},[s[4]||(s[4]=d(" Потребляет: ")),n("img",{src:g(l.resource),class:"res-icon"},null,8,r0),d(" –"+a(k(l))+"/ч ",1),y(l,!0)?(o(),r("span",o0,"(макс: "+a(l.amountPerHour)+")",1)):i("",!0)]))),128))])):i("",!0),e.value&&e.value.requiresResourceCell&&e.value.requiresResourceCell!=="geothermal"?(o(),r("div",l0," Месторождение: "+a(Math.floor(F.value)),1)):i("",!0),e.value.status?(o(),r("div",a0,[s[5]||(s[5]=d(" Статус: ")),n("span",{class:D({green:e.value.status==="Работает",yellow:e.value.status==="На паузе",red:e.value.status==="Месторождение истощено",gray:e.value.status==="Отключено"})},a(e.value.status),3)])):i("",!0),e.value.enabled!==void 0&&e.value.type!=="drop-module"?(o(),r("div",n0,[n("span",{style:x({cursor:"pointer",textDecoration:"underline",color:e.value.enabled?"#38d39f":"#ff6b6b"}),onClick:Z},a(e.value.enabled?"Отключить":"Включить"),5)])):i("",!0),e.value.type!=="drop-module"?(o(),r("button",{key:9,onClick:H}," Удалить ")):i("",!0),n("div",u0,"id: "+a(e.value.id),1)])):(o(),r("div",i0," Нет данных по зданию "))}}},C0=S(d0,[["__scopeId","data-v-3da131b5"]]);export{C0 as default};
